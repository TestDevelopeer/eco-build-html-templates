(this["webpackJsonpbtw-admin-dashboard"]=this["webpackJsonpbtw-admin-dashboard"]||[]).push([[13],{1080:function(e,t,s){"use strict";s.r(t);var n=s(25),a=s(1),c=s(0),i=s(554),r=s(555),o=s(556),l=s(560),u=s(561),j=s(562),d=s(510),b=s(661),m=s(121),O=s(260),h=s(665),p=s(578),x=s(664),g=s(614),f=s(48),q=s(34),y=s.n(q),v=s(772),w=s(1058),N=s(1041),A=s(1059),_=s(602),Q=s(608),T=(s(773),s(11)),I=function(e){var t=e.title,s=e.actions,n=e.children,l=e.collapseIcon,u=e.reloadIcon,j=e.removeIcon,d=e.endReload,b=e.callBack,m=Object(c.useState)(!1),O=Object(f.a)(m,2),h=O[0],p=O[1],x=Object(c.useState)(!0),g=Object(f.a)(x,2),q=g[0],I=g[1],C=Object(c.useState)(!0),k=Object(f.a)(C,2),R=k[0],S=(k[1],{collapse:l||w.a,remove:j||N.a,reload:u||A.a}),E=function(e){switch(e){case"collapse":return I(!q);case"remove":return b();case"reload":return p(!0)}},z=function(){p(!1)};Object(c.useEffect)((function(){h&&d(z)}));var F="collapse"===s||s.includes("collapse")?_.a:c.Fragment,P="reload"===s||s.includes("reload")?v.a:c.Fragment;return Object(T.jsx)(P,Object(a.a)(Object(a.a)({},"reload"===s||s.includes("reload")?{blocking:h,className:"reload-wrapper",loader:Object(T.jsx)(Q.a,{color:"primary",className:"reload-spinner"})}:{}),{},{children:Object(T.jsxs)(i.a,{className:y()("card-action",{"d-none":!R}),children:[Object(T.jsxs)(r.a,{children:[Object(T.jsx)(o.a,{tag:"h4",children:t}),Object(T.jsx)("div",{className:"action-icons",children:function(){if(Array.isArray(s))return s.map((function(e,t){var n=S[e];return Object(T.jsx)(n,{className:y()("cursor-pointer",{"mr-50":t<s.length-1}),size:15,onClick:function(){return E(e)}},t)}));var e=S[s];return Object(T.jsx)(e,{className:"cursor-pointer",size:15,onClick:function(){return E(s)}})}()})]}),Object(T.jsx)(F,Object(a.a)(Object(a.a)({},"collapse"===s||s.includes("collapse")?{isOpen:q}:{}),{},{children:n}))]})}))},C=s(892),k=s(120),R=s(774),S=s.n(R),E=s(791),z=(s(846),s(847),s(848),s(611)),F=s(850),P=s.n(F),K=s(851),U=Object(O.a)({form:"questionEdit"})((function(e){var t=e.answers.map((function(t,s){return Object(T.jsx)(T.Fragment,{children:"delete"!==t.answer_text&&Object(T.jsx)(K.Animated,{animationIn:"fadeIn",animationOut:"fadeOut",isVisible:!0,children:Object(T.jsxs)(u.a,{className:"justify-content-between align-items-center ".concat(P.a.animate),children:[Object(T.jsx)(j.a,{md:8,children:Object(T.jsxs)(h.a,{children:[Object(T.jsx)(p.a,{for:"answer-".concat(t.answer_id),children:"\u0422\u0435\u043a\u0441\u0442 \u043e\u0442\u0432\u0435\u0442\u0430"}),Object(T.jsx)("input",{onChange:function(t){return e.changeAnswerText(s,t)},value:t.answer_text,type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u0442\u0432\u0435\u0442",name:"answer",id:"answer-".concat(t.answer_id),className:"input-group-merge is-touched is-dirty av-valid form-control"})]})}),Object(T.jsx)(j.a,{md:2,children:Object(T.jsx)(x.a,{className:"custom-control-success",type:"radio",id:"answer-radio-".concat(t.answer_id),name:"customRadio",inline:!0,checked:"1"===t.answer_true,onChange:function(){return e.changeIsTrue(s)}})}),Object(T.jsx)(j.a,{md:2,children:Object(T.jsxs)(d.a.Ripple,{color:"danger",className:"text-nowrap px-1",onClick:function(){return e.deleteAnswer(s)},outline:!0,children:[Object(T.jsx)(N.a,{size:14,className:"mr-50"}),Object(T.jsx)("span",{children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})}),Object(T.jsx)(j.a,{sm:12,children:Object(T.jsx)("hr",{})})]})})})})),s=[{title:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043c\u0435\u0434\u0438\u0430 \u0444\u0430\u0439\u043b\u044b (".concat(e.questionAssets.data.length,")"),content:Object(T.jsx)(T.Fragment,{children:e.questionAssets&&Object(T.jsx)(u.a,{children:"image"===e.question.question_type?e.questionAssets.data.map((function(t,s){return Object(T.jsx)(j.a,{md:2,children:Object(T.jsx)(I,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",actions:"remove",callBack:function(){return e.deleteAsset(t,s)},children:Object(T.jsx)(g.a,{top:!0,src:"".concat(k.a.SERVER_URI).concat(e.questionAssets.path).concat(e.question.question_id,"/").concat(e.question.question_type,"/").concat(t),alt:"question image"})})})})):"video"===e.question.question_type&&e.questionAssets.data.map((function(t,s){return Object(T.jsx)(j.a,{md:3,children:Object(T.jsx)(I,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",actions:"remove",callBack:function(){return e.deleteAsset(t,s)},children:Object(T.jsx)(S.a,{url:"".concat(k.a.SERVER_URI).concat(e.questionAssets.path).concat(e.question.question_id,"/").concat(e.question.question_type,"/").concat(t),className:"react-player-video",width:"100%",height:"auto",volume:.5,controls:!0})})})}))})})}];return Object(T.jsxs)("form",{className:"question-edit-form mt-2 animate__fadeIn",onSubmit:e.handleSubmit,children:[Object(T.jsxs)(u.a,{children:[Object(T.jsx)(j.a,{md:6,children:Object(T.jsxs)(h.a,{children:[Object(T.jsx)(p.a,{className:"form-label",for:"question",children:"\u0422\u0435\u043a\u0441\u0442 \u0432\u043e\u043f\u0440\u043e\u0441\u0430"}),Object(T.jsx)("input",{onChange:function(t){return e.changeQuestionText(t)},value:e.question.question_text,id:"question",name:"question",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u043e\u043f\u0440\u043e\u0441",type:"text",className:"input-group-merge is-touched is-dirty av-valid form-control"})]})}),Object(T.jsx)(j.a,{md:6,children:Object(T.jsxs)(h.a,{children:[Object(T.jsxs)(p.a,{className:"form-label",for:"type",children:["\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u0432\u043e\u043f\u0440\u043e\u0441\u0430, \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0442\u0438\u043f: ",Object(T.jsxs)("strong",{children:[" ",e.question.question_type]})]}),Object(T.jsx)(b.a,{id:"type",theme:m.c,className:"react-select",classNamePrefix:"select",name:"clear",value:e.typeOptions[e.typeKey],options:e.typeOptions,onChange:e.setType})]})}),Object(T.jsx)(j.a,{sm:12,children:Object(T.jsx)("hr",{})})]}),Object(T.jsxs)(u.a,{children:[Object(T.jsx)(j.a,{md:12,children:"text"!==e.question.question_type&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(z.a,{type:"margin",className:"mb-1",data:s}),Object(T.jsx)(j.a,{sm:12,children:Object(T.jsx)("hr",{})})]})}),Object(T.jsxs)(j.a,{className:P.a.animate,md:"text"===e.question.question_type?12:6,children:[t,Object(T.jsxs)(d.a,{className:"btn-icon",color:"primary",onClick:e.addAnswer,children:[Object(T.jsx)(C.a,{size:14}),Object(T.jsx)("span",{className:"align-middle ml-25",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0435"})]})]}),Object(T.jsxs)(j.a,{className:P.a.animate,md:"text"!==e.question.question_type?6:0,children:["text"!==e.question.question_type&&Object(T.jsx)(K.Animated,{animationIn:"bounceInRight",animationOut:"fadeOut",isVisible:!0,children:Object(T.jsx)(E.a,{uppy:e.uppy})}),Object(T.jsx)("div",{className:"UppyProgressBar"})]})]}),Object(T.jsx)(u.a,{className:"d-flex justify-content-center mt-2",children:Object(T.jsx)(j.a,{md:6,children:Object(T.jsx)(d.a.Ripple,{color:"success",block:!0,outline:!0,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})})]})})),B=function(e){return Object(T.jsxs)(i.a,{children:[Object(T.jsx)(r.a,{children:Object(T.jsx)(o.a,{tag:"h4",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u043e\u043f\u0440\u043e\u0441"})}),Object(T.jsxs)(l.a,{children:[Object(T.jsxs)(u.a,{children:[Object(T.jsx)(j.a,{md:6,children:Object(T.jsx)(b.a,{theme:m.c,className:"react-select",classNamePrefix:"select",name:"clear",options:e.questionsOptions(),onChange:e.onChange})}),e.currQuestion&&Object(T.jsx)(j.a,{md:6,children:Object(T.jsxs)(d.a.Ripple,{color:"danger",className:"text-nowrap px-1",onClick:function(){return e.deleteQuestion(e.currQuestion)},outline:!0,children:[Object(T.jsx)(N.a,{size:14,className:"mr-50"}),Object(T.jsx)("span",{children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})}),Object(T.jsx)(j.a,{sm:12,children:Object(T.jsx)("hr",{})})]}),e.currQuestion&&Object(T.jsx)(u.a,{children:Object(T.jsx)(j.a,{md:12,children:Object(T.jsx)(U,{questionAssets:e.questionAssets,typeOptions:e.typeOptions,defaultType:e.defaultType,setType:e.setType,onSubmit:e.onSubmit,question:e.currQuestion,answers:e.answers,count:e.count,addAnswer:e.addAnswer,deleteAnswer:e.deleteAnswer,changeAnswerText:e.changeAnswerText,changeQuestionText:e.changeQuestionText,changeIsTrue:e.changeIsTrue,deleteAsset:e.deleteAsset,uppy:e.uppy,typeKey:e.typeKey})})})]})]})},V=s(117),H=s(138),J=s(534),M=s.n(J),W=s(920),D=s(214),G=s(549),L=[{value:"text",label:"text"},{value:"image",label:"image"},{value:"video",label:"video"}],X=function(){return Object(T.jsxs)(c.Fragment,{children:[Object(T.jsxs)("div",{className:"toastify-header",children:[Object(T.jsxs)("div",{className:"title-wrapper",children:[Object(T.jsx)(G.a,{size:"sm",color:"success",icon:Object(T.jsx)(W.a,{size:12})}),Object(T.jsx)("h6",{className:"toast-title",children:"\u041f\u043e\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c!"})]}),Object(T.jsx)("small",{className:"text-muted",children:"\u0442\u043e\u043b\u044c\u043a\u043e \u0447\u0442\u043e"})]}),Object(T.jsx)("div",{className:"toastify-body",children:Object(T.jsx)("span",{role:"img","aria-label":"toast-text",children:"\u0412\u0430\u0448 \u0432\u043e\u043f\u0440\u043e\u0441 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d."})})]})};t.default=Object(V.b)((function(e){return{questions:e.questions.questions,currQuestion:e.questions.currQuestion,answers:e.questions.answers,questionAssets:e.questions.questionAssets}}),{getQuestions:H.g,getQuestionInfo:H.f,changeAnswer:H.a,changeQuestion:H.c,changeAssets:H.b,saveQuestion:H.h,getNewAssets:H.e,uploadassets:H.i})((function(e){Object(c.useEffect)((function(){e.getQuestions()}),[]);var t,s,i=Object(a.a)({},e.currQuestion),r=Object(n.a)(e.answers),o=e.questionAssets?Object(n.a)(e.questionAssets.data):[];if(e.currQuestion)for(var l in(t=new M.a({autoProceed:!1,restrictions:{maxNumberOfFiles:3,allowedFileTypes:["".concat(e.currQuestion.question_type,"/*")]}})).on("file-added",(function(t){var s={type:t.type.includes("video")?"video":"image",question:e.currQuestion};e.uploadassets(t.data,s)})),L)if(L[l].value===e.currQuestion.question_type){s=l;break}return Object(T.jsx)(B,{currQuestion:e.currQuestion,answers:e.answers,questionAssets:e.questionAssets,onChange:function(t){e.getQuestionInfo(t.value)},questionsOptions:function(){if(e.questions)return e.questions.map((function(e){return{value:e.question_id,label:e.question_text}}))},typeOptions:L,setType:function(s){t.cancelAll(),i.question_type=s.value,e.changeQuestion(i),e.getNewAssets(e.currQuestion,i.question_type)},onSubmit:function(){e.saveQuestion(e.currQuestion,e.answers,(function(){return D.b.success(Object(T.jsx)(X,{}),{position:D.b.POSITION.TOP_CENTER})}))},addAnswer:function(){var t=[].concat(Object(n.a)(e.answers),[{answer_id:null,answer_question_id:e.currQuestion.question_id,answer_text:"",answer_true:"0"}]);e.changeAnswer(t)},deleteAnswer:function(t){r[t].answer_text="delete",e.changeAnswer(r)},changeAnswerText:function(t,s){r[t].answer_text=s.target.value,e.changeAnswer(r)},changeQuestionText:function(t){i.question_text=t.target.value,e.changeQuestion(i)},changeIsTrue:function(t){for(var s in r)if("1"===r[s].answer_true){r[s].answer_true="0";break}r[t].answer_true="1",e.changeAnswer(r)},deleteAsset:function(t,s){o.splice(s,1),e.changeAssets(t,e.currQuestion,i.question_type)},uppy:t,typeKey:s})}))},549:function(e,t,s){"use strict";var n=s(1),a=s(62),c=s(119),i=s(0),r=s(675),o=s(34),l=s.n(o),u=s(11),j=Object(i.forwardRef)((function(e,t){var s,i,o=e.color,j=e.className,d=e.imgClassName,b=e.initials,m=e.size,O=e.badgeUp,h=e.content,p=e.icon,x=e.badgeColor,g=e.badgeText,f=e.img,q=e.imgHeight,y=e.imgWidth,v=e.status,w=e.tag,N=e.contentStyles,A=Object(c.a)(e,["color","className","imgClassName","initials","size","badgeUp","content","icon","badgeColor","badgeText","img","imgHeight","imgWidth","status","tag","contentStyles"]);return Object(u.jsxs)(w,Object(n.a)(Object(n.a)({className:l()("avatar",(s={},Object(a.a)(s,j,j),Object(a.a)(s,"bg-".concat(o),o),Object(a.a)(s,"avatar-".concat(m),m),s)),ref:t},A),{},{children:[!1===f||void 0===f?Object(u.jsxs)("span",{className:l()("avatar-content",{"position-relative":O}),style:N,children:[b?function(e){var t=[];return e.split(" ").forEach((function(e){t.push(e[0])})),t.join("")}(h):h,p||null,O?Object(u.jsx)(r.a,{color:x||"primary",className:"badge-sm badge-up",pill:!0,children:g||"0"}):null]}):Object(u.jsx)("img",{className:l()(Object(a.a)({},d,d)),src:f,alt:"avatarImg",height:q&&!m?q:32,width:y&&!m?y:32}),v?Object(u.jsx)("span",{className:l()((i={},Object(a.a)(i,"avatar-status-".concat(v),v),Object(a.a)(i,"avatar-status-".concat(m),m),i))}):null]}))}));t.a=j,j.defaultProps={tag:"div"}},611:function(e,t,s){"use strict";var n=s(1),a=s(62),c=s(48),i=s(25),r=s(0),o=s(34),l=s.n(o),u=s(849),j=s(554),d=s(555),b=s(556),m=s(602),O=s(560),h=s(11),p=function(e){var t,s=e.data,o=e.type,p=e.accordion,x=e.active,g=e.toggle,f=e.titleKey,q=e.contentKey,y=e.className,v=Object(r.useState)(p?x:Object(i.a)(x)),w=Object(c.a)(v,2),N=w[0],A=w[1],_=function(e){if(p)A(e===N?null:e);else{var t=N,s=t.indexOf(e);t.includes(e)?(t.splice(s,1),A(Object(i.a)(t))):(t.push(e),A(Object(i.a)(t)))}};return Object(h.jsx)("div",{className:l()("collapse-icon",(t={},Object(a.a)(t,y,y),Object(a.a)(t,"collapse-default",!o),Object(a.a)(t,"collapse-shadow","shadow"===o),Object(a.a)(t,"collapse-border","border"===o),Object(a.a)(t,"collapse-margin","margin"===o),t)),children:s.map((function(e,t){var s,c=f?e[f]:e.title,i=q?e[q]:e.content;return Object(h.jsxs)(j.a,{className:l()("app-collapse",(s={},Object(a.a)(s,e.className,e.className),Object(a.a)(s,"open",p?N===t:N.includes(t)&&"shadow"===o),s)),children:[Object(h.jsxs)(d.a,Object(n.a)(Object(n.a)({className:l()("align-items-center",{collapsed:p?N!==t:!N.includes(t)})},"hover"===g?{onMouseEnter:function(){return _(t)}}:{onClick:function(){return _(t)}}),{},{children:[Object(h.jsx)(b.a,{className:"collapse-title",children:c}),Object(h.jsx)(u.a,{size:14})]})),Object(h.jsx)(m.a,{isOpen:p?N===t:N.includes(t),children:Object(h.jsx)(O.a,{children:i})})]},t)}))})};t.a=p,p.defaultProps={active:[],toggle:"click"}},848:function(e,t,s){},850:function(e,t,s){e.exports={animate:"questionEditForm_animate__2QFMt"}}}]);
//# sourceMappingURL=13.3480f7bd.chunk.js.map